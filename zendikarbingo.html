<!DOCTYPE html>
<html>
<head>
	<title>Maro's Teaser Bingo!</title>

	<!-- Compiled and minified CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

</head>
<body>
	<script>
	var predictions = [
		"new counter types",
		"new removal mechanic (emblems?)",
		"popular, powerful reprint (snappy?)",
		"new artifact token",
		"FUGHAZI DRAGONS",
		"returning faction mechanic",
		"potara legendary",
		"cast a card type off the top",
		"mirror mechanic",
		"old legend, new vampire",
		"new 0-13 card",
		"spell reduction via vampirism",
		"impulse on red cards",
		"upkeep sac trigger",
		"hentai matters (kraken, leviathan, octopus, serpent)",
		"token doubler",
		"human death trigger",
		"spirit and enchantment matters",
		"new 13 card",
		"human ranger werewolf",
		"angel soldier",
		"zombie scorpion",
		"serpent egg",
		"eye horror",
		"legendary human peasant",
		"legendary spirit warlock",
		"legendary slug horror",
		"legendary kraken horror",
		"legendary vampire noble 1",
		"legendary vampire noble 2",
	]
	var zen_predictions = [
		"ob nixilis",
		"fetches in CB",
		"nissa comes home",
		"mythic hydra",
		"trap subtype",
		"'roil' >=3 cards",
		"'hedron' mana rock",
		"CZ get all EDH goodies",
		"gatewatch reference",
		"landfall",
		"mulyduly or x planty bois",
		"hybrid mana",
		"new drana",
		"4th eldrazi titan",
		"common land cycle",
		"dinos on zendi",
		"vampire nighthawk reprint",
		"broken ramp",
		"reference to eldrazi",
		"awaken",
		"ally",
		"quest",
		"class subtype tribal",
		"kraken egg"
	]
	var cardSpots = [
		"b1",
		"b2",
		"b3",
		"b4",
		"b5",
		"i1",
		"i2",
		"i3",
		"i4",
		"i5",
		"n1",
		"n2",
		"n4",
		"n5",
		"g1",
		"g2",
		"g3",
		"g4",
		"g5",
		"o1",
		"o2",
		"o3",
		"o4",
		"o5"
	]
	var alphabet = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z", "1", "2", "3","4"]
	var orderedPredictions = new Map();
	predictions.forEach((element, index) => orderedPredictions.set(alphabet[index], element));
	console.log(orderedPredictions);
	function randomizePredictions(alphabet, predictions) {
		var count = predictions.length;
		while (count !== 0) {
			var newSpot = Math.floor(Math.random() * predictions.length);
			var currentSpot = count -1;
			var temp = alphabet[currentSpot];
			alphabet[currentSpot] = alphabet[newSpot];
			alphabet[newSpot] = temp;
			count--;
		}
		console.log(alphabet.join().replace(/,/g,''));
	}
	function printCard(alphabet, predictions) {
		console.log("generating bingo card...");
		randomizePredictions(alphabet, predictions);
		console.log("done randomizing");
		populateCard(alphabet);

		document.cookie = "savecode=" + alphabet.join().replace(/,/g,'') + "; expires=Fri, 31 Dec 2021 23:00:00 UTC; path=/";

		var cookies = document.cookie;
		console.log(cookies);


	}

	function populateCard(order) {
		for (var count = 0; count < 24; count++) {
			document.getElementById(cardSpots[count]).innerText = orderedPredictions.get(order[count]);
		}
	}

	// todo: make this load saved order from cookies
	function loadCard(alphabet, predictions) {
		var order = getOrder();
		var ordered = order.split('');
		populateCard(ordered);

	}

	function getOrder() {
		var precooks = decodeURIComponent(document.cookie);
		var cooks = precooks.split('; ');
		console.log(cooks);
		let result;
		cooks.forEach(value => {
			if (value.indexOf("savecode=") === 0) result = value.substring("savecode=".length);
		})
		console.log(result);
		return result;
	}
	</script>
	<div class="container">
		<div class="section">
			<div class="row">
				<div class="col s1"></div>
				<div class="col s2">B</div>
				<div class="col s2">I</div>
				<div class="col s2">N</div>
				<div class="col s2">G</div>
				<div class="col s2">O</div>
				<div class="col s1"></div>
			</div>
			<div class="row">
				<div  class="col s1"></div>
				<div id="b1" class="col s2"></div>
				<div id="b2" class="col s2"></div>
				<div id="b3" class="col s2"></div>
				<div id="b4" class="col s2"></div>
				<div id="b5" class="col s2"></div>
				<div class="col s1"></div>
			</div>
			<div class="row">
				<div class="col s1"></div>
				<div id="i1" class="col s2"></div>
				<div id="i2" class="col s2"></div>
				<div id="i3" class="col s2"></div>
				<div id="i4" class="col s2"></div>
				<div id="i5" class="col s2"></div>
				<div class="col s1"></div>
			</div>
			<div class="row">
				<div class="col s1"></div>
				<div id="n1" class="col s2"></div>
				<div id="n2" class="col s2"></div>
				<div id="n3" class="col s2">Free (Omnath reprint)</div>
				<div id="n4" class="col s2"></div>
				<div id="n5" class="col s2"></div>
				<div class="col s1"></div>
			</div>
			<div class="row">
				<div class="col s1"></div>
				<div id="g1" class="col s2"></div>
				<div id="g2" class="col s2"></div>
				<div id="g3" class="col s2"></div>
				<div id="g4" class="col s2"></div>
				<div id="g5" class="col s2"></div>
				<div class="col s1"></div>
			</div>
			<div class="row">
				<div class="col s1"></div>
				<div id="o1" class="col s2"></div>
				<div id="o2" class="col s2"></div>
				<div id="o3" class="col s2"></div>
				<div id="o4" class="col s2"></div>
				<div id="o5" class="col s2"></div>
				<div class="col s1"></div>
			</div>
			<input type="submit" onclick="loadCard();" value="Generate Saved Bingo Card" />
			<button onclick="printCard(alphabet, predictions);"> Generate New Bingo Card </button>
			<div class="row">
				<div class="col s6"><p id="savecode"></p></div>
				</div>
			</div>
		</div>
	</div>



	<!-- Compiled and minified JavaScript -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</body>
</html>
